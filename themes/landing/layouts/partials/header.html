<!-- partial/header.html -->
<header class="site-header">
  <div class="header-container">
    <!-- Logo Section -->
    <div class="site-branding">
      <a href="{{ "/" | relLangURL }}" class="logo-link">
        <img src="{{ .Site.Params.logo | relURL }}"
             alt="{{ .Site.Title }}" 
             class="site-logo"
             width="216" 
             height="60">
      </a>
    </div>

    <!-- Navigation Toggle -->
    <button class="nav-toggle" 
            aria-label="{{ "Toggle menu" | i18n }}"
            aria-controls="primary-menu"
            aria-expanded="false">
      <span class="toggle-icon"></span>
    </button>

    <!-- Main Navigation -->
    <nav class="site-navigation" id="primary-menu" aria-label="{{ "Primary Menu" | i18n }}">
      <ul class="nav-menu">
        {{ range .Site.Menus.main }}
        <li class="nav-item {{ if .HasChildren }}has-dropdown{{ end }} {{ if and .Page (or (eq .URL .Page.RelPermalink) (.Page.IsMenuCurrent "main" .)) }}is-active{{ end }}">
          <a href="{{ .URL | relLangURL }}" class="nav-link">{{ .Name }}</a>
          {{ if .HasChildren }}
          <ul class="dropdown-menu">
            {{ range .Children }}
            <li class="dropdown-item {{ if and .Page (or (eq .URL .Page.RelPermalink) (.Page.IsMenuCurrent "main" .)) }}is-active{{ end }}">
              <a href="{{ .URL | relLangURL }}" class="dropdown-link">{{ .Name }}</a>
            </li>
            {{ end }}
          </ul>
          {{ end }}
        </li>
        {{ end }}
        <li class="nav-item">
          <a href="https://tratamentes.buk.pt/" class="nav-link nav-link--schedule">
            {{ "schedule" | i18n }}
          </a>
        </li>
      </ul>

      <!-- Language Selector -->
      <div class="lang-selector">
        <label for="lang-select" class="sr-only">{{ "select_language" | i18n }}</label>
        <select id="lang-select" class="lang-select" onChange="window.location.href=this.value">
          {{ range .Site.Languages }}
          {{ $langURL := "/" }}
          {{ if ne .Lang $.Site.Language.Lang }}
          {{ $langURL = printf "/%s/" .Lang }}
          {{ end }}
          <option value="{{ $langURL }}" {{ if eq .Lang $.Lang }}selected{{ end }}>
            {{ .LanguageName }}
          </option>
          {{ end }}
        </select>
      </div>
    </nav>
  </div>
</header>